<!DOCTYPE html>
<html lang="es-es">
<head>
	<title>Personalizando nuestro editor a nuestro gusto - Unity &middot; Antonio Moon´s</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="author" content="Moon Antonio">
	<meta name="description" content="un blog sobre mi, juegos, desarrollo y anime">
	<meta name="keywords" content="Moon,Antonio,Dev,Game">
	<meta name="generator" content="Hugo 0.50" />

	<meta property="og:title" content="Personalizando nuestro editor a nuestro gusto - Unity" />
<meta property="og:description" content="Un CustomEditor nos permite cambiar la representación visual de nuestras clases en el Unity Inspector. Hace más sencillo interactuar con las script classes asociadas a Gameobjects, prefabs, etc…

Nuestro primer paso es crear una carpeta con el nombre Editor. Para Unity es un nombre de carpeta muy especial, Unity carga automaticamente todos los scripts que modifican el comportamiento del UnityEditor desde esta carpeta. Estos scripts NO serán incluidos en el empaquetado final del juego, solo serán usado por el UnityEditor." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://moonantonio.github.io/post/2019/dev/001/" /><meta property="article:published_time" content="2019-01-24T13:28:38&#43;01:00"/>
<meta property="article:modified_time" content="2019-01-24T13:28:38&#43;01:00"/>


	<!-- CSS -->
	<link rel="stylesheet" href="https://moonantonio.github.io/css/main.css">
	<link rel='stylesheet' href='/css/prism.css' />

	<!--Favicon-->
	<link rel="apple-touch-icon" href="https://moonantonio.github.io/apple-touch-icon.png">
	<link rel="shortcut icon" href="https://moonantonio.github.io/favicon.ico" type="image/x-icon">

	

	<!-- Font Awesome -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.9.0/css/solid.min.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.9.0/css/brands.min.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.9.0/css/fontawesome.min.css">

	<!-- Google Fonts -->
	<link href="//fonts.googleapis.com/css?family=Source+Sans+Pro:400,700,700italic,400italic" rel="stylesheet" type="text/css">
</head>

<body>
	<header class="site-header">
	<div class="branding">
		<a href="https://moonantonio.github.io/">
		<img class="avatar" src="https://moonantonio.github.io/img/avatar.png" alt="avatar"/>
		</a>
		<h1 class="site-title">
				<i class="fas fa-angle-right"></i>
				<span class="logo__text">Antonio Moon´s</span>
				<span class="logo__cursor"></span>
		</h1>
	</div>
	<nav class="site-nav">
		<ul>
			<li class="list-group">
  <a class="list-group-item" href="https://moonantonio.github.io/devblog/" title="devBlog">
  		</i>&nbsp; devBlog</a> <i class="fas fa-gamepad" aria-hidden="true"></i>
  </a>
</li>

<li class="list-group">
  <a class="list-group-item" href="https://moonantonio.github.io/backdoor" title="BackDoor">
  		</i>&nbsp; BackDoor</a> <i class="fab fa-black-tie" aria-hidden="true"></i>
  </a>
</li>

<li class="list-group">
  <a class="list-group-item" href="https://github.com/MoonAntonio/rec.repos" title="Public">
  		</i>&nbsp; Publico</a> <i class="fas fa-code" aria-hidden="true"></i>
  </a>
</li>

<li class="list-group">
  <a class="list-group-item" href="https://moonantonio.github.io/portfolio/" title="About">
  		</i>&nbsp; About</a> <i class="fas fa-terminal" aria-hidden="true"></i>
  </a>
</li>

<li class="icon">
	<a href="https://moonantonio.github.io/" title="&#43;">
		</i>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;•&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</i>
	</a>
</li>

<li class="icon">
	<a href="https://moonantonio.github.io/" title="">
		<i class="fas fa-fw fa-home"></i>
	</a>
</li>

<li class="icon">
	<a href="https://moonantonio.github.io/index.xml" title="Subcribe">
		<i class="fas fa-fw fa-rss"></i>
	</a>
</li>

<li class="icon">
	<a href="mailto:antoniomt.moon@gmail.com" title="Email">
		<i class="fas fa-fw fa-envelope"></i>
	</a>
</li>



<li class="icon">
	<a href="https://bitbucket.org/MoonAntonio" rel="me" title="Bitbucket">
		<i class="fab fa-fw fa-bitbucket"></i>
	</a>
</li>







<li class="icon">
	<a href="https://github.com/MoonAntonio" rel="me" title="GitHub">
		<i class="fab fa-fw fa-github"></i>
	</a>
</li>

























<li class="icon">
	<a href="https://trello.com/antoniomoon" rel="me" title="Trello">
		<i class="fab fa-fw fa-trello"></i>
	</a>
</li>

<li class="icon">
	<a href="https://gitlab.com/MoonAntonio" rel="me" title="Gitlab">
		<i class="fab fa-fw fa-gitlab"></i>
	</a>
</li>





		</ul>
	</nav>
</header>


	<div class="content">
	<article class="feature-image">
		<header style="background-image: url('https://moonantonio.github.io/img/bg.png')">
			<h1 class="title">Personalizando nuestro editor a nuestro gusto - Unity</h1>
		</header>

		<section class="post-content">
			<p>Un CustomEditor nos permite cambiar la representación visual de nuestras clases en el Unity Inspector. Hace más sencillo interactuar con las script classes asociadas a  Gameobjects, prefabs, etc…</p>

<p><center><img src="/img/Dev/customEditorPrev01.png" alt="002" /><img src="/img/Dev/customEditorPrev02.png" alt="002" /></center></p>

<p>Nuestro primer paso es crear una carpeta con el nombre Editor. Para Unity es un nombre de carpeta muy especial, Unity carga automaticamente todos los scripts que modifican el comportamiento del UnityEditor desde esta carpeta. Estos scripts NO serán incluidos en el empaquetado final del juego, solo serán usado por el UnityEditor.</p>

<p>Creamos dos carpetas más: Scripts y Scenes para guardar el resto de scripts y la escena que tendrá nuestro trabajo</p>

<p>El árbol de directorios nos queda así:</p>

<hr />

<pre><code>.
Assets   
│
└───NombreProyecto
│       Editor
│       Scripts
│       Scenes 
</code></pre>

<hr />

<p>Empezaremos con dos clases muy simples, primero creamos un nuevo script con el nombre de Unidad.cs en nuestra carpeta Scripts y añadimos las siguientes clases:</p>

<hr />

<pre><code class="language-C#">//                                  ┌∩┐(◣_◢)┌∩┐
//                                                                              \\
// Unidad.cs (24/01/2019)                                                       \\
// Autor: Antonio Mateo (.\Moon Antonio)    antoniomt.moon@gmail.com            \\
// Descripcion:     Clase que contiene la informacion de una unidad.            \\
// Fecha Mod:       24/01/2019                                                  \\
// Ultima Mod:      Version Inicial.                                            \\
//******************************************************************************\\

#region Librerias
using UnityEngine;
#endregion

namespace MoonAntonio
{
    /// &lt;summary&gt;
    /// &lt;para&gt;Clase que contiene la informacion de una unidad.&lt;/para&gt;
    /// &lt;/summary&gt;
    [HelpURL(&quot;https://moonantonio.github.io/&quot;), AddComponentMenu(&quot;MoonAntonio/Unidad&quot;), System.Serializable]
    public class Unidad : MonoBehaviour 
    {
        #region Variables Publicas
        public Data data;
        #endregion

        #region Dev
        [ContextMenu(&quot;Dev&quot;)]
        protected void DevScript()
        {
            Debug.Log(&quot;&lt;color=green&gt;Unidad :: DevScript()&lt;/color&gt; &gt;&gt; Inicializado.&quot;);
        }
        #endregion
    }

    [System.Serializable]
    public class Data
    {
        #region Variables Publicas
        public float vida = 0.0f;
        public float mana = 0.0f;
        public bool isVivo = false;
        #endregion
    }
}
</code></pre>

<hr />

<p>Data representará la información de la unidad.</p>

<p>Queremos clases capaces de ser serializadas. Para hacer esto añadimos la etiqueta [System.Serializable] sobre la declaración de las clases.</p>

<p><center><img src="/img/Dev/customEditorPrev01.png" alt="002" /></center></p>

<p>Ahora crearemos nuestra clase editor personalizada, creamos un nuevo script en la carpeta Editor llamado UnidadInspector e importamos la clase editor usada por el UnityEditor.</p>

<p>Añadimos la etiqueta [CustomEditor(typeof(Unidad))] para indicar que vamos a definir la representacion de la clase Unidad en el editor. UnidadInspector hereda de Editor.
Sobreescribimos OnInspectorGUI(), este método será llamado con cada evento del editor.</p>

<hr />

<pre><code class="language-C#">//                                  ┌∩┐(◣_◢)┌∩┐
//                                                                              \\
// UnidadInspector.cs (24/01/2019)                                              \\
// Autor: Antonio Mateo (.\Moon Antonio)    antoniomt.moon@gmail.com            \\
// Descripcion:     Inspector de la clase Unidad.                               \\
// Fecha Mod:       24/01/2019                                                  \\
// Ultima Mod:      Version Inicial.                                            \\
//******************************************************************************\\

#region Librerias
using UnityEngine;
using UnityEditor;
#endregion

namespace MoonAntonio
{
    /// &lt;summary&gt;
    /// &lt;para&gt;Inspector de la clase &lt;see cref=&quot;Unidad&quot;/&gt;.&lt;/para&gt;
    /// &lt;/summary&gt;
    [HelpURL(&quot;https://moonantonio.github.io/&quot;), AddComponentMenu(&quot;MoonAntonio/UnidadInspector&quot;), CustomEditor(typeof(Unidad))]
    public class UnidadInspector : Editor 
    {
        public override void OnInspectorGUI()
        {
            // TODO
        }

        #region Dev
        [ContextMenu(&quot;Dev&quot;)]
        protected void DevScript()
        {
            Debug.Log(&quot;&lt;color=green&gt;UnidadInspector :: DevScript()&lt;/color&gt; &gt;&gt; Inicializado.&quot;);
        }
        #endregion
    }
}
</code></pre>

<hr />

<p>La primera tarea es añadir en TODO lo siguiente:</p>

<hr />

<pre><code class="language-C#">serializedObject.Update(); 

// TODO
                            
serializedObject.ApplyModifiedProperties();
</code></pre>

<hr />

<p>Ahora podemos continuar con la interfaz gráfica</p>

<p>Podemos añadir etiquetas de texto usando LabelField, donde esta TODO :</p>

<hr />

<pre><code class="language-C#">EditorGUILayout.LabelField(&quot;Datos Unidad&quot;);
</code></pre>

<hr />

<p>Extraer los atributos de ‘data’ usando el nombre del atributo con el objecto serializado y FindProperty:</p>

<hr />

<pre><code class="language-C#">SerializedProperty dataProperty = serializedObject.FindProperty(&quot;data&quot;);
</code></pre>

<hr />

<p>Para extraer los atributos de Data podemos usar el nombre del atributo con FindPropertyRelative porque usaremos la propiedad extraida previamente.</p>

<hr />

<pre><code class="language-C#">SerializedProperty vidaProperty = dataProperty.FindPropertyRelative(&quot;vida&quot;);
SerializedProperty manaProperty = dataProperty.FindPropertyRelative(&quot;mana&quot;);
SerializedProperty isVivoProperty = dataProperty.FindPropertyRelative(&quot;isVivo&quot;);
</code></pre>

<hr />

<p>Para dibujar nuestra lista empezamos añadiendo una linea horizontal  y espacios flexibles a cada uno de los lados, así los elementos se mantendrán juntos incluso si se cambia el tamaño del editor.</p>

<hr />

<pre><code class="language-C#">EditorGUILayout.BeginHorizontal();
// TODO
EditorGUILayout.EndHorizontal();
</code></pre>

<hr />

<p>Al final quedara algo asi:</p>

<hr />

<pre><code class="language-C#">//                                  ┌∩┐(◣_◢)┌∩┐
//                                                                              \\
// UnidadInspector.cs (24/01/2019)                                              \\
// Autor: Antonio Mateo (.\Moon Antonio)    antoniomt.moon@gmail.com            \\
// Descripcion:     Inspector de la clase Unidad.                               \\
// Fecha Mod:       24/01/2019                                                  \\
// Ultima Mod:      Version Inicial.                                            \\
//******************************************************************************\\

#region Librerias
using UnityEngine;
using UnityEditor;
#endregion

namespace MoonAntonio
{
    /// &lt;summary&gt;
    /// &lt;para&gt;Inspector de la clase &lt;see cref=&quot;Unidad&quot;/&gt;.&lt;/para&gt;
    /// &lt;/summary&gt;
    [HelpURL(&quot;https://moonantonio.github.io/&quot;), AddComponentMenu(&quot;MoonAntonio/UnidadInspector&quot;), CustomEditor(typeof(Unidad))]
    public class UnidadInspector : Editor 
    {
        public override void OnInspectorGUI()
        {
            serializedObject.Update();

            EditorGUILayout.LabelField(&quot;Datos Unidad&quot;);
            SerializedProperty dataProperty = serializedObject.FindProperty(&quot;data&quot;);
            SerializedProperty vidaProperty = dataProperty.FindPropertyRelative(&quot;vida&quot;);
            SerializedProperty manaProperty = dataProperty.FindPropertyRelative(&quot;mana&quot;);
            SerializedProperty isVivoProperty = dataProperty.FindPropertyRelative(&quot;isVivo&quot;);

            EditorGUILayout.BeginHorizontal(&quot;box&quot;);
            vidaProperty.floatValue = EditorGUILayout.FloatField(&quot;HP&quot;, vidaProperty.floatValue);
            manaProperty.floatValue = EditorGUILayout.FloatField(&quot;MP&quot; ,manaProperty.floatValue);
            EditorGUILayout.EndHorizontal();

            EditorGUILayout.BeginHorizontal(&quot;box&quot;);
            isVivoProperty.boolValue = EditorGUILayout.Toggle(&quot;Alive&quot;, isVivoProperty.boolValue);
            EditorGUILayout.EndHorizontal();

            serializedObject.ApplyModifiedProperties();
        }

        #region Dev
        [ContextMenu(&quot;Dev&quot;)]
        protected void DevScript()
        {
            Debug.Log(&quot;&lt;color=green&gt;UnidadInspector :: DevScript()&lt;/color&gt; &gt;&gt; Inicializado.&quot;);
        }
        #endregion
    }
}
</code></pre>

<hr />

<p><center><img src="/img/Dev/customEditorPrev02.png" alt="002" /></center></p>

<p><center><a href="https://github.com/MoonAntonio/CustomEditorUnity" class="button">Repo. Github</a></p>

<p><a href="https://ko-fi.com/B0B3NA0O"><img src="https://www.ko-fi.com/img/donate_sm.png" alt="ko-fi" /></a></p>


			

			<hr>
			

<h3></h3>
<ul>
	
	<li><a href="/post/2019/comun/002/">Presentando La Videoconsola Virtual Pico8</a></li>
	
	<li><a href="/post/2018/dev/012/">Unity Profiler - Optimización</a></li>
	
	<li><a href="/post/2018/dev/010/">¡Consejos esenciales de Gamedev &amp; Unity!</a></li>
	
	<li><a href="/post/2018/dev/009/">Unity : Aseprite Workflow</a></li>
	
	<li><a href="/post/2017/dev/014/">MVC simplificado.</a></li>
	
</ul>

		</section>
	</article>
	</div>

	<footer class="site-footer">
	<p class="text">&copy; 2021 - Moon Antonio</p>
</footer>
<script src='/js/prism.js'></script>

<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-89564434-1', 'auto');
	
	ga('send', 'pageview');
}
</script>

</body>
</html>
