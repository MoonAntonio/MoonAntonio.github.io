<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">

        <title>The Book of Shaders: Running your shader</title>
        <link href="..\favicon.gif" rel="shortcut icon">
        <meta name="keywords" content="shader,openGL,WebGL,GLSL,book,procedural,generative">
        <meta name="description" content="Gentle step-by-step guide through the abstract and complex universe of Fragment Shaders.">

        <!— Open Graph data —>
        <meta property="og:type" content="article">
        <meta property="og:title" content="The Book of Shaders">
        <meta property="og:site_name" content="The Book of Shaders">
        <meta property="og:description" content="Gentle step-by-step guide through the abstract and complex universe of Fragment Shaders.">
        <meta property="og:image" content="http://thebookofshaders.com/thumb.png">
        <meta property="og:image:secure_url" content="https://thebookofshaders.com/thumb.png">
        <meta property="og:image:type" content="image/png">
        <meta property="og:image:width" content="500">
        <meta property="og:image:height" content="500">


        <!— Twitter Card—>
        <meta name="twitter:card" content="image">
        <meta name="twitter:site" content="@bookofshaders">
        <meta name="twitter:creator" content="@patriciogv">
        <meta name="twitter:title" content="The Book Of Shaders">
        <meta name="twitter:domain" content="thebookofshaders.com">
        <meta name="twitter:description" content="Gentle step-by-step guide through the abstract and complex universe of Fragment Shaders.">
        <meta name="twitter:image" content="https://thebookofshaders.com/thumb.png">
        <meta name="twitter:image:width" content="500">
        <meta name="twitter:image:height" content="500">


        <link href="..\favicon.gif" rel="shortcut icon">

        <!-- Highlight -->

        <link type="text/css" rel="stylesheet" href="..\css\github.css">
        <script type="text/javascript" src="..\src\highlight.min.js"></script>
        <!-- GlslCanvas -->

        <script type="text/javascript" src="..\src\glslCanvas\build\GlslCanvas.js"></script>
        <!-- GlslEditor -->

        <link type="text/css" rel="stylesheet" href="..\glslEditor\glslEditor.css">
        <script type="application/javascript" src="..\glslEditor\glslEditor.js"></script>
        <!-- GlslGallery -->

        <link type="text/css" rel="stylesheet" href="..\glslGallery\glslGallery.css">
        <script type="application/javascript" src="..\glslGallery\glslGallery.js"></script>
        <!-- Main style -->

        <link type="text/css" rel="stylesheet" href="..\css\style.css">
    </head>
    <body>

    <div class="header">
        <p class="subtitle"><a href="..\index-8.html">The Book of Shaders</a> by <a href="http://patriciogonzalezvivo.com">Patricio Gonzalez Vivo</a> & <a href="http://jenlowe.net">Jen Lowe</a> </p>
        <p> <a href="index-1.html?lan=jp">日本語</a> - <a href="index-2.html?lan=ch">中文版</a> - <a href="index-3.html?lan=kr">한국어</a> - <a href="index.html?lan=es">Español</a> - <a href="index-4.html?lan=fr">Français</a> - <a href="index-5.html?lan=it">Italiano</a> - <a href="index-6.html?lan=de">Deutsch</a> - <a href="index-7.html?lan=ru">Русский</a> - <a href="index-8.html">English</a></p>
    </div>
    <hr>
<div id="content"><h2>Running your shader</h2>
<p>As part of the construction of this book and my art practice I made an ecosystem of tools to create, display, share and curate shaders. These tools work consistently across Linux Desktops, MacOS, <a href="https://www.raspberrypi.org/">Raspberry Pi</a> and browsers without the need of changing your code.</p>
<p><strong>Display</strong>: all live examples in this book are displayed using <a href="https://github.com/patriciogonzalezvivo/glslCanvas">glslCanvas</a> which makes the process of running standalone shader incredible easy.</p>
<pre><code class="language-html">&lt;canvas class="glslCanvas" data-fragment-url=“yourShader.frag" data-textures=“yourInputImage.png” width="500" height="500"&gt;&lt;/canvas&gt;</code></pre>
<p>As you can see, it just needs a <code>canvas</code> element with <code>class="glslCanvas"</code> and the url to your shader in the <code>data-fragment-url</code>. Learn more about it <a href="https://github.com/patriciogonzalezvivo/glslCanvas">here</a>.</p>
<p>If you are like me, you will probably want to run shaders directly from the console, in that case you should check out <a href="https://github.com/patriciogonzalezvivo/glslViewer">glslViewer</a>. This application allows you to incorporate shaders into your <code>bash</code> scripts or unix pipelines and use it in a similar way that <a href="http://www.imagemagick.org/script/index.php">ImageMagick</a>. Also <a href="https://github.com/patriciogonzalezvivo/glslViewer">glslViewer</a> is a great way to compile shaders on your <a href="https://www.raspberrypi.org/">Raspberry Pi</a>, reason why <a href="http://openframe.io/">openFrame.io</a> use it to display shader artwork. Learn more about this application <a href="https://github.com/patriciogonzalezvivo/glslViewer">here</a>.</p>
<pre><code class="language-bash">glslViewer yourShader.frag yourInputImage.png —w 500 -h 500 -s 1 -o yourOutputImage.png</code></pre>
<p><strong>Create</strong>: in order to illuminate the experience of coding shaders I made an online editor called <a href="https://github.com/patriciogonzalezvivo/glslEditor">glslEditor</a>. This editor is embedded on the book's live examples, it brings a series of handy widgets to make more tangible the abstract experience of working with glsl code. You can also run it as a standalone web application from <a href="http://editor.thebookofshaders.com/">editor.thebookofshaders.com/</a>. Learn more about it <a href="https://github.com/patriciogonzalezvivo/glslEditor">here</a>.</p>
<p><img src="glslEditor-01.gif" alt=""></p>
<p>If you prefer to work offline using <a href="https://www.sublimetext.com/">SublimeText</a> you can install this <a href="https://packagecontrol.io/packages/glslViewer">package for glslViewer</a>. Learn more about it <a href="https://github.com/patriciogonzalezvivo/sublime-glslViewer">here</a>.</p>
<p><img src="glslViewer.gif" alt=""></p>
<p><strong>Share</strong>: the online editor (<a href="http://editor.thebookofshaders.com/">editor.thebookofshaders.com/</a>) can share your shaders! Both the embedded and standalone version have an export button where you can get an unique URL's to your shader. Also have the ability to export directly to an <a href="http://openframe.io/">openFrame.io</a>.</p>
<p><img src="glslEditor-00.gif" alt=""></p>
<p><strong>Curate</strong>: Sharing your code is the beginning of you sharing your shader as artwork! Beside the option to export to <a href="http://openframe.io/">openFrame.io</a> I made a tool to curate your shaders into a gallery that can be embebed on any site, it’s name is <a href="https://github.com/patriciogonzalezvivo/glslGallery">glslGallery</a>. Learn more <a href="https://github.com/patriciogonzalezvivo/glslGallery">here</a>.</p>
<p><img src="glslGallery.gif" alt=""></p>
<h2>Running your shaders on your favorite framework</h2>
<p>In case you already have experience programming in a framework like: <a href="https://processing.org/">Processing</a>, <a href="http://threejs.org/">Three.js</a> or <a href="http://openframeworks.cc/">OpenFrameworks</a>, you're probably excited to try shaders on this platforms you feel comfortable with. The following are examples of how to set shaders in some popular frameworks with the same uniforms that we are going to use throughout this book. (In the <a href="https://github.com/patriciogonzalezvivo/thebookofshaders/tree/master/04">GitHub repository for this chapter</a>, you'll find the full source code for these three frameworks.)</p>
<h3>In <strong>Three.js</strong></h3>
<p>The brilliant and very humble Ricardo Cabello (aka <a href="https://twitter.com/mrdoob">MrDoob</a> ) has been developing along with other <a href="https://github.com/mrdoob/three.js/graphs/contributors">contributors</a> probably one of the most famous frameworks for WebGL, called <a href="http://threejs.org/">Three.js</a>. You will find a lot of examples, tutorials and books that teach you how to use this JavaScript library to make cool 3D graphics.</p>
<p>Below is an example of the HTML and JS you need to get started with shaders in three.js. Pay attention to the <code>id="fragmentShader"</code> script, here is where you can copy the shaders you find in this book.</p>
<pre><code class="language-html">&lt;body&gt;
    &lt;div id="container"&gt;&lt;/div&gt;
    &lt;script src="js/three.min.js"&gt;&lt;/script&gt;
    &lt;script id="vertexShader" type="x-shader/x-vertex"&gt;
        void main() {
            gl_Position = vec4( position, 1.0 );
        }
    &lt;/script&gt;
    &lt;script id="fragmentShader" type="x-shader/x-fragment"&gt;
        uniform vec2 u_resolution;
        uniform float u_time;

        void main() {
            vec2 st = gl_FragCoord.xy/u_resolution.xy;
            gl_FragColor=vec4(st.x,st.y,0.0,1.0);
        }
    &lt;/script&gt;
    &lt;script&gt;
        var container;
        var camera, scene, renderer;
        var uniforms;

        init();
        animate();

        function init() {
            container = document.getElementById( 'container' );

            camera = new THREE.Camera();
            camera.position.z = 1;

            scene = new THREE.Scene();

            var geometry = new THREE.PlaneBufferGeometry( 2, 2 );

            uniforms = {
                u_time: { type: "f", value: 1.0 },
                u_resolution: { type: "v2", value: new THREE.Vector2() },
                u_mouse: { type: "v2", value: new THREE.Vector2() }
            };

            var material = new THREE.ShaderMaterial( {
                uniforms: uniforms,
                vertexShader: document.getElementById( 'vertexShader' ).textContent,
                fragmentShader: document.getElementById( 'fragmentShader' ).textContent
            } );

            var mesh = new THREE.Mesh( geometry, material );
            scene.add( mesh );

            renderer = new THREE.WebGLRenderer();
            renderer.setPixelRatio( window.devicePixelRatio );

            container.appendChild( renderer.domElement );

            onWindowResize();
            window.addEventListener( 'resize', onWindowResize, false );

            document.onmousemove = function(e){
              uniforms.u_mouse.value.x = e.pageX
              uniforms.u_mouse.value.y = e.pageY
            }
        }

        function onWindowResize( event ) {
            renderer.setSize( window.innerWidth, window.innerHeight );
            uniforms.u_resolution.value.x = renderer.domElement.width;
            uniforms.u_resolution.value.y = renderer.domElement.height;
        }

        function animate() {
            requestAnimationFrame( animate );
            render();
        }

        function render() {
            uniforms.u_time.value += 0.05;
            renderer.render( scene, camera );
        }
    &lt;/script&gt;
&lt;/body&gt;</code></pre>
<h3>In <strong>Processing</strong></h3>
<p>Started by <a href="http://benfry.com/">Ben Fry</a> and <a href="http://reas.com/">Casey Reas</a> in 2001, <a href="https://processing.org/">Processing</a> is an extraordinarily simple and powerful environment in which to take your first steps in code (it was for me at least). <a href="https://codeanticode.wordpress.com/">Andres Colubri</a> has made important updates to the openGL and video in Processing, making it easier than ever to use and play with GLSL shaders in this friendly environment. Processing will search for the shader named <code>"shader.frag"</code> in the <code>data</code> folder of the sketch. Be sure to copy the examples you find here into that folder and rename the file.</p>
<pre><code class="language-cpp">PShader shader;

void setup() {
  size(640, 360, P2D);
  noStroke();

  shader = loadShader("shader.frag");
}

void draw() {
  shader.set("u_resolution", float(width), float(height));
  shader.set("u_mouse", float(mouseX), float(mouseY));
  shader.set("u_time", millis() / 1000.0);
  shader(shader);
  rect(0,0,width,height);
}</code></pre>
<p>In order for the shader to work on versions previous to 2.1, you need to add the following line at the beginning of your shader: <code>#define PROCESSING_COLOR_SHADER</code>. So that it looks like this:</p>
<pre><code class="language-glsl">#ifdef GL_ES
precision mediump float;
#endif

#define PROCESSING_COLOR_SHADER

uniform vec2 u_resolution;
uniform vec3 u_mouse;
uniform float u_time;

void main() {
    vec2 st = gl_FragCoord.st/u_resolution;
    gl_FragColor = vec4(st.x,st.y,0.0,1.0);
}</code></pre>
<p>For more information about shaders in Processing check out this <a href="https://processing.org/tutorials/pshader/">tutorial</a>.</p>
<h3>In <strong>openFrameworks</strong></h3>
<p>Everybody has a place where they feel comfortable, in my case, that’s still the <a href="http://openframeworks.cc/">openFrameworks community</a>. This C++ framework wraps around OpenGL and other open source C++ libraries. In many ways it's very similar to Processing, but with the obvious complications of dealing with C++ compilers. In the same way as Processing, openFrameworks will search for your shader files in the data folder, so don’t forget to copy the <code>.frag</code> files you want to use and change the name when you load them.</p>
<pre><code class="language-cpp">void ofApp::draw(){
    ofShader shader;
    shader.load("","shader.frag");

    shader.begin();
    shader.setUniform1f("u_time", ofGetElapsedTimef());
    shader.setUniform2f("u_resolution", ofGetWidth(), ofGetHeight());
    ofRect(0,0,ofGetWidth(), ofGetHeight());
    shader.end();
}</code></pre>
<p>For more information about shaders in openFrameworks go to this <a href="http://openframeworks.cc/ofBook/chapters/shaders.html">excellent tutorial</a> made by <a href="http://thefactoryfactory.com/">Joshua Noble</a>.</p>
	</div>
	<hr>
	<ul class="navigationBar">
		<li class="navigationBar" onclick="previusPage()">&lt; &lt; Previous</li>
		<li class="navigationBar" onclick="homePage()"> Home </li>
		<li class="navigationBar" onclick="nextPage()">Next &gt; &gt;</li>
	</ul>

        <footer>
            <p> Copyright 2015 <a href="http://www.patriciogonzalezvivo.com" target="_blank">Patricio Gonzalez Vivo</a> </p>
        </footer>

        <script type="text/javascript" src="..\src\main.js" defer=""></script>
        <script>
            (function(i,s,o,g,r,a,m){i["GoogleAnalyticsObject"]=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,"script","//www.google-analytics.com/analytics.js","ga");

            ga("create", "UA-18824436-2", "auto");
            ga("send", "pageview");
        </script>
    </body>
</html>
